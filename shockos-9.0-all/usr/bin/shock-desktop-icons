#!/bin/bash

if [[ ! -f ~/.config/shock-desktop-icons ]]
then

    touch ~/.config/shock-desktop-icons

    echo "show_desktop_icons=true

computer=false

home=true

trash=true

network=false

mounted_volumes=true" | tee ~/.config/shock-desktop-icons

fi

source ~/.config/shock-desktop-icons

output="$(yad --title="Desktop Icons" --window-icon=emblem-desktop --form --field="Show Desktop Icons":CHK "$show_desktop_icons" --field="The following options will only apply if desktop icons are enabled:":LBL '' --field="Computer":CHK "$computer" --field="Home":CHK "$home" --field="Trash":CHK "$trash" --field="Network":CHK "$network" --field="Mounted Volumes":CHK "$mounted_volumes" --button="Apply"\!gtk-ok --button="Cancel"\!gtk-cancel)"

ex=$?

if ((ex!=0))
then

    exit

fi

show_desktop_icons="$(echo "$output" | awk -F'|' '{print $1}' | awk '{print tolower($0)}')"

computer="$(echo "$output" | awk -F'|' '{print $3}' | awk '{print tolower($0)}')"

home="$(echo "$output" | awk -F'|' '{print $4}' | awk '{print tolower($0)}')"

trash="$(echo "$output" | awk -F'|' '{print $5}' | awk '{print tolower($0)}')"

network="$(echo "$output" | awk -F'|' '{print $6}' | awk '{print tolower($0)}')"

mounted_volumes="$(echo "$output" | awk -F'|' '{print $7}' | awk '{print tolower($0)}')"

dconf write /org/mate/desktop/background/show-desktop-icons "$show_desktop_icons"

dconf write /org/mate/caja/desktop/computer-icon-visible "$computer"

dconf write /org/mate/caja/desktop/home-icon-visible "$home"

dconf write /org/mate/caja/desktop/trash-icon-visible "$trash"

dconf write /org/mate/caja/desktop/network-icon-visible "$network"

dconf write /org/mate/caja/desktop/volumes-visible "$mounted_volumes"

echo "show_desktop_icons=$show_desktop_icons

computer=$computer

home=$home

trash=$trash

network=$network

mounted_volumes=$mounted_volumes" | tee ~/.config/shock-desktop-icons



