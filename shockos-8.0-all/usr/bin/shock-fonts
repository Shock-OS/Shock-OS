#!/bin/bash

function detect_exit() {

ex=$?

if [[ "$ex" != "0" ]]
then

    exit

fi

}

if ! [[ -f ~/.config/shock_fonts ]]
then

    touch ~/.config/shock_fonts

    echo "current_appfont=\"'Cantarell 11'\"

current_deskfont=\"'Cantarell 11'\"

current_docfont=\"'Cantarell 11'\"

current_fixedwidthfont=\"'Monospace 13'\"

current_windowtitlefont=\"'Cantarell Bold 11'\"" | tee ~/.config/shock_fonts

fi

source ~/.config/shock_fonts

font_to_change=$(yad --title="Fonts" --window-icon=preferences-desktop-font --form --text='Which system font would you like to change?' --field='':CB 'Application Font!Desktop Font!Document Font!Fixed Width Font!Window Title Font' --button="Close"\!gtk-close:1 --button="Next"\!go-next:0)

detect_exit

if [[ "$font_to_change" == "Application Font|" ]]
then

    new_font=$(yad --font --title="Application Font" --window-icon=preferences-desktop-font --fontname="$current_appfont" --button="Apply"\!gtk-ok --button="Cancel"\!gtk-cancel)

    detect_exit

    dconf write /org/mate/desktop/interface/font-name "'$new_font'"

    current_appfont="$new_font"

elif [[ "$font_to_change" == "Desktop Font|" ]]
then

    new_font=$(yad --font --title="Desktop Font" --window-icon=preferences-desktop-font --fontname="$current_deskfont" --button="Apply"\!gtk-ok --button="Cancel"\!gtk-cancel)

    detect_exit

    dconf write /org/mate/caja/desktop/font "'$new_font'"

    current_deskfont="$new_font"

elif [[ "$font_to_change" == "Document Font|" ]]
then

    new_font=$(yad --font --title="Document Font" --window-icon=preferences-desktop-font --fontname="$current_docfont" --button="Apply"\!gtk-ok --button="Cancel"\!gtk-cancel)

    detect_exit

    dconf write /org/mate/desktop/interface/document-font-name "'$new_font'"

    current_docfont="$new_font"

elif [[ "$font_to_change" == "Fixed Width Font|" ]]
then

    new_font=$(yad --font --title="Fixed Width Font" --window-icon=preferences-desktop-font --fontname="$current_fixedwidthfont" --button="Apply"\!gtk-ok --button="Cancel"\!gtk-cancel)

    detect_exit

    dconf write /org/mate/desktop/interface/monospace-font-name "'$new_font'"

    current_fixedwidthfont="$new_font"

elif [[ "$font_to_change" == "Window Title Font|" ]]
then

    new_font=$(yad --font --title="Window Title Font" --window-icon=preferences-desktop-font --fontname="$current_windowtitlefont" --button="Apply"\!gtk-ok --button="Cancel"\!gtk-cancel)

    detect_exit

    dconf write /org/mate/marco/general/titlebar-font "'$new_font'"

    current_windowtitlefont="$new_font"

fi

echo "current_appfont=\"$current_appfont\"

current_deskfont=\"$current_deskfont\"

current_docfont=\"$current_docfont\"

current_fixedwidthfont=\"$current_fixedwidthfont\"

current_windowtitlefont=\"$current_windowtitlefont\"" | tee ~/.config/shock_fonts


